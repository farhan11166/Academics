SQL query for question 4
SELECT * FROM Students WHERE major='Computer Science';
Explain QUERY question 5
QUERY PLAN
`--SCAN Students
SQL query for question 5
SELECT first_name,last_name FROM Students WHERE major='Computer Science';
Explain QUERY question 7
QUERY PLAN
|--SCAN Enrollments
|--SEARCH Students USING INTEGER PRIMARY KEY (rowid=?)
`--SEARCH Courses USING INTEGER PRIMARY KEY (rowid=?)

Explain QUERY question 9
QUERY PLAN
`--SEARCH Students USING INDEX idx_students_major (major=?)
Expalin query question 11
QUERY PLAN
|--SCAN e USING INDEX idx_enrollments_course_id
|--SEARCH s USING INTEGER PRIMARY KEY (rowid=?)
`--SEARCH c USING INTEGER PRIMARY KEY (rowid=?)
Result for question 12
Index did not exist.
Avg. time without index: 0.001248 seconds
Result for question 13
Index dropped.
Avg. time without index: 0.001426 seconds
Code & result for question 14:
import sqlite3
import time
import random

DB_FILE = "university.db"
NUM_INSERTS = 500

con = sqlite3.connect(DB_FILE)
cur = con.cursor()

cur.execute("SELECT student_id FROM Students")
student_ids = [row[0] for row in cur.fetchall()]

cur.execute("SELECT course_id FROM Courses")
course_ids = [row[0] for row in cur.fetchall()]

def random_grade():
    return round(random.uniform(0, 10), 2)  

start_time = time.time()

for _ in range(NUM_INSERTS):
    student_id = random.choice(student_ids)
    course_id = random.choice(course_ids)
    grade = random_grade()
    cur.execute(
        "INSERT INTO Enrollments (student_id, course_id, grade) VALUES (?, ?, ?)",
        (student_id, course_id, grade)
    )

con.commit()

end_time = time.time()
print(f"Time to insert {NUM_INSERTS} rows with indexes: {end_time - start_time:.6f} seconds")

con.close()
Time to insert 500 rows with indexes: 0.020261 seconds
Code & result question 15
import sqlite3
import time
import random

DB_FILE = "university.db"
NUM_INSERTS = 500

con = sqlite3.connect(DB_FILE)
cur = con.cursor()

for idx_name in ["idx_enrollments_student_id", "idx_enrollments_course_id"]:
    try:
        cur.execute(f"DROP INDEX {idx_name}")
        print(f"Index {idx_name} dropped.")
    except sqlite3.OperationalError:
        print(f"Index {idx_name} did not exist.")

cur.execute("SELECT student_id FROM Students")
student_ids = [row[0] for row in cur.fetchall()]

cur.execute("SELECT course_id FROM Courses")
course_ids = [row[0] for row in cur.fetchall()]

def random_grade():
    return round(random.uniform(0, 10), 2)

start_time = time.time()

for _ in range(NUM_INSERTS):
    student_id = random.choice(student_ids)
    course_id = random.choice(course_ids)
    grade = random_grade()
    cur.execute(
        "INSERT INTO Enrollments (student_id, course_id, grade) VALUES (?, ?, ?)",
        (student_id, course_id, grade)
    )

con.commit()
Index idx_enrollments_student_id did not exist.
Index idx_enrollments_course_id did not exist.
Time to insert 500 rows without indexes: 0.018130 seconds


